# Скачивание изображений по api SpaceX и NASA, публикация в TG-канал
Набор скриптов для скачивания с помощью API изображений с запусков SpaceX и NASA APOD

## Установка
1. Python 3 уже должен быть установлен.
2. Склонируйте проект:
```bash
git clone https://github.com/cedradeff/dev-api-space-telegram
```
2. Затем используйте `pip` для установки зависимостей:
```bash
pip install -r requirements
```
4. Рекомендуется использовать venv для изоляции проекта.
5. Перед запуском скриптов необходимо добавить в перменные окружения токен телаграм бота, id канала и ключ API NASA в файл .env

### Примеры запуска

#### Получения изображений с конкретного запуска SpaceX по id, либо с последнего запуска, если id не задан

```bash
python fetch_spacex_images.py
Нет фотографий для этого запуска

python fetch_spacex_images.py --id 5eb87ce4ffd86e000604b338
Файл сохранен images/spacex1.jpg
```

#### Получения изображений NASA APOD

```bash
python fetch_nasa_apod.py 
Файл сохранён: images/nasa_apod_1.jpg
Файл сохранён: images/nasa_apod_2.jpg
Файл сохранён: images/nasa_apod_3.gif
```

#### Публикация конкретного изображения в TG-канал, либо случайного, если не задано конкретное изображение
```bash
python send_one_image.py --photo images/nasa_apod_1.jpg
Отправка фото images/nasa_apod_1.jpg в -100123456789 ...
Фото успешно отправлено

python send_one_image.py
Фото не указано, выбрано случайное: images/nasa_apod_1.jpg
Отправка фото images/nasa_apod_1.jpg в -100123456789 ...
Фото успешно отправлено
```

#### Публикация случайных изображений в бесконечном цике в TG-канал

По умолчанию интервал отправки - 4 часа. Для изменения интервала запустить скрипт с аргументом --delay

```bash
python bot.py
Старт публикаций каждые 4 часов в канал -100123456789
Отправка: images/spacex1.jpg
Следующая публикация через 4 часов...

python bot.py --delay 1
Старт публикаций каждые 1.0 часов в канал -1003147440448
Отправка: images/spacex1.jpg
```
